{% extends 'template_coreui.html.twig' %}

{% block title %} {{ page_title }} {% endblock %}

{% block home_path %}
<li class="breadcrumb-item">
    {{ page_title }}
</li>
{% endblock %}

{% block body_header_right %}
<button form="global_search_form" type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
{% endblock %}

{% block body %}

<div class="commande-wrapper">

    <input type="hidden" id="order_target" value="{{ target }}">
    {# <input type="hidden" id="order_data_source" value="{{ source }}"> #}
   
    <div class="animated fadeIn">
        <div class="card">
            <div class="card-header">
                <i class="fa fa-align-justify"></i> Recherche</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12">
                        <form id="global_search_form" method="POST" action="{{ path("order_search") }}">
                            <div class="form-group">
                                <label>N° de commande/avoir/devis</label>
                                <input type="number" name="search[order]" class="form-control" />
                            </div>
                            <div class="form-group">
                                <label>N° de Facture</label>
                                <input type="number" name="search[bill]" class="form-control" />
                            </div>
                            <div class="form-group">
                                <label>Société</label>
                                <select name="search[client]" class="form-control">
                                    <option value="">Veuillez sélectionner une société</option>
                                    {% for client in clients %}
                                    <option value="{{ client.id }}">{% if client.Denomination %} {{ client.CompanyName ~ ' : ' ~ client.Denomination }} {% else %} {{ client.CompanyName }} {% endif %}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Commercial en charge</label>
                                <select name="search[agent]" class="form-control">
                                    <option value="">Veuillez sélectionner un commercial</option>
                                    {% for agent in agents %}
                                    <option value="{{ agent.id }}">{{ agent.firstname ~ ' ' ~ agent.lastname }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Date de début</label>
                                <input type="date" name="search[dtDebut]" class="form-control" />
                            </div>
                            <div class="form-group">
                                <label>Date de fin</label>
                                <input type="date" name="search[dtFin]" class="form-control" />
                            </div>
                            <buton type="submit" value="Recherche" class="float-center" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <i class="fa fa-align-justify"></i> Résultat de votre recherche</div>
                    <div class="card-body tbResult">
                        <table id="order_table_js"
                            class="table table-responsive-md table-bordered table-striped table-md">
                        </table>
                        <div class="no-result">
                            <tr>
                                <td>Aucune donnée trouvée</td>
                            </tr>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.col-->
        </div>
    </div>
</div>


{% endblock %}
{% block javascripts %}
<script src="{{  asset('order.js','qobd_web_js') }}"></script>
{% endblock %}